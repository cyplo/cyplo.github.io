<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0"><channel><title>Adventurous Computing (Posts about programming)</title><link>https://blog.cyplo.net/</link><description></description><atom:link rel="self" type="application/rss+xml" href="https://blog.cyplo.net/categories/cat_programming.xml"></atom:link><language>en</language><lastBuildDate>Tue, 01 Jan 2019 12:49:14 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>How to build minimalistic REST server in .Net</title><link>https://blog.cyplo.net/posts/2012/11/01/minimalistic-rest-server-in-dotnet.html</link><dc:creator>Cyryl PÅ‚otnicki</dc:creator><description>&lt;div&gt;&lt;p&gt;Install "Microsoft ASP.NET Web API Self Host" and all of its
dependencies via NuGet.&lt;/p&gt;
&lt;pre class="code csharp"&gt;&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="nn"&gt;System&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="nn"&gt;System.Collections.Generic&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="nn"&gt;System.Linq&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="nn"&gt;System.Text&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="nn"&gt;System.Threading&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-6"&gt;&lt;/a&gt;&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="nn"&gt;System.Threading.Tasks&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-7"&gt;&lt;/a&gt;&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="nn"&gt;System.Web.Http&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-8"&gt;&lt;/a&gt;&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="nn"&gt;System.Web.Http.SelfHost&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-9"&gt;&lt;/a&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-10"&gt;&lt;/a&gt;&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="nn"&gt;resttest&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-11"&gt;&lt;/a&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-12"&gt;&lt;/a&gt;    &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ExampleData&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;Id&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="k"&gt;get&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;set&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-13"&gt;&lt;/a&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-14"&gt;&lt;/a&gt;    &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ExampleController&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ApiController&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-15"&gt;&lt;/a&gt;    &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-16"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;// /api/job&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-17"&gt;&lt;/a&gt;        &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="n"&gt;IEnumerable&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;ExampleData&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Get&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-18"&gt;&lt;/a&gt;        &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-19"&gt;&lt;/a&gt;            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;ExampleData&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;()&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-20"&gt;&lt;/a&gt;            &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-21"&gt;&lt;/a&gt;                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;ExampleData&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt; &lt;span class="n"&gt;Id&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-22"&gt;&lt;/a&gt;                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;ExampleData&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt; &lt;span class="n"&gt;Id&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="m"&gt;4&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-23"&gt;&lt;/a&gt;            &lt;span class="p"&gt;};&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-24"&gt;&lt;/a&gt;        &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-25"&gt;&lt;/a&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-26"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;// /api/job/3&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-27"&gt;&lt;/a&gt;        &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="n"&gt;ExampleData&lt;/span&gt; &lt;span class="nf"&gt;Get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-28"&gt;&lt;/a&gt;        &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-29"&gt;&lt;/a&gt;            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;ExampleData&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;Id&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="p"&gt;};&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-30"&gt;&lt;/a&gt;        &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-31"&gt;&lt;/a&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-32"&gt;&lt;/a&gt;    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-33"&gt;&lt;/a&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-34"&gt;&lt;/a&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-35"&gt;&lt;/a&gt;    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Program&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-36"&gt;&lt;/a&gt;    &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-37"&gt;&lt;/a&gt;        &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;Main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-38"&gt;&lt;/a&gt;        &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-39"&gt;&lt;/a&gt;            &lt;span class="kt"&gt;var&lt;/span&gt; &lt;span class="n"&gt;configuration&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HttpSelfHostConfiguration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"http://localhost:1337"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-40"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;//Setup the routes&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-41"&gt;&lt;/a&gt;            &lt;span class="n"&gt;configuration&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Routes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MapHttpRoute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-42"&gt;&lt;/a&gt;                &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;"DefaultApiRoute"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-43"&gt;&lt;/a&gt;                &lt;span class="n"&gt;routeTemplate&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;"api/{controller}/{id}"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-44"&gt;&lt;/a&gt;                &lt;span class="n"&gt;defaults&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-45"&gt;&lt;/a&gt;                    &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;controller&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s"&gt;"ExampleController"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RouteParameter&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Optional&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-46"&gt;&lt;/a&gt;                &lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-47"&gt;&lt;/a&gt;            &lt;span class="kt"&gt;var&lt;/span&gt; &lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HttpSelfHostServer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;configuration&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-48"&gt;&lt;/a&gt;            &lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OpenAsync&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;Wait&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-49"&gt;&lt;/a&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-50"&gt;&lt;/a&gt;            &lt;span class="n"&gt;Console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WriteLine&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"Press ESC to quit"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-51"&gt;&lt;/a&gt;            &lt;span class="k"&gt;do&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-52"&gt;&lt;/a&gt;            &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-53"&gt;&lt;/a&gt;                &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(!&lt;/span&gt;&lt;span class="n"&gt;Console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;KeyAvailable&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-54"&gt;&lt;/a&gt;                &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-55"&gt;&lt;/a&gt;                    &lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;256&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-56"&gt;&lt;/a&gt;                &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-57"&gt;&lt;/a&gt;            &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ReadKey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;true&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;Key&lt;/span&gt; &lt;span class="p"&gt;!=&lt;/span&gt; &lt;span class="n"&gt;ConsoleKey&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Escape&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-58"&gt;&lt;/a&gt;        &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-59"&gt;&lt;/a&gt;    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_da3eeb587e654c9087f0435e9e5337ad-60"&gt;&lt;/a&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;We can launch it and query it using any http-enabled client:&lt;/p&gt;
&lt;p&gt;&lt;tt class="docutils literal"&gt;$ curl &lt;span class="pre"&gt;http://localhost:1337/api/Example&lt;/span&gt; &lt;span class="pre"&gt;[{"Id":2},{"Id":4}]&lt;/span&gt;&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;C'est volia&lt;/p&gt;&lt;/div&gt;</description><category>.net</category><category>asp.net</category><category>c#</category><category>json</category><category>mvc</category><category>rest</category><category>server</category><guid>https://blog.cyplo.net/posts/2012/11/01/minimalistic-rest-server-in-dotnet.html</guid><pubDate>Thu, 01 Nov 2012 13:22:39 GMT</pubDate></item></channel></rss>