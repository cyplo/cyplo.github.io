(function(){flowr=function(s,t){function u(a,c){var h=0,d=a.length,b=[],f=0;for(requiredPadding=function(){return(b.length-1+(1==arguments.length?arguments[0]:0))*c.padding};f+requiredPadding()<c.maxWidth&&h<d;){var e=a[h],k=c.itemWidth.call($this,e),l=c.itemHeight.call($this,e),g=c.height,k=Math.floor(k*c.height/l);k>c.maxWidth&&(k=c.maxWidth-1-requiredPadding(1),g=c.height*g/k);if(f+k<c.maxWidth)b.push({height:g,width:k,itemData:e}),f+=k,h++;else break}testWidth=0;if(f<c.maxWidth){h=(c.maxWidth-
requiredPadding()-10)/f;h>c.maxScale&&(h=1);d=Math.round(c.height*h);for(i=0;i<b.length;i++)f=b[i],f.width=Math.floor(f.width*h),f.height=d,testWidth+=f.width}return{data:b,width:testWidth+requiredPadding()}}$this=s;var p=function(a){a=a||{};for(var c=1;c<arguments.length;c++)if(arguments[c])for(var b in arguments[c])arguments[c].hasOwnProperty(b)&&(a[b]=arguments[c][b]);return a},d=function(){var a=0,c={};return{set:function(b,d){var e;void 0===b.myCustomDataTag?(e=a++,b.myCustomDataTag=e):e=b.myCustomDataTag;
c[e]=p(c[e],d)},get:function(a){return c[a.myCustomDataTag]||{}}}}(),l=["complete","data","responsive"],b={data:[],padding:5,height:240,render:null,append:!1,widthAttr:"width",heightAttr:"height",maxScale:1.5,maxWidth:$this.offsetWidth-1,itemWidth:null,itemHeight:null,complete:null,rowClassName:"flowr-row",rows:-1,responsive:!0},a=p(b,t);if(a.append&&d.get($this).lastSettings){lastSettings=d.get($this).lastSettings;for(attr in b)0>l.indexOf(attr)&&a[attr]==b[attr]&&(a[attr]=lastSettings[attr]);lastRow=
d.get($this).lastRow;0<lastRow.data.length&&25<a.maxWidth-lastRow.width&&(lastRowData=lastSettings.data.slice(lastSettings.data.length-lastRow.data.length-1),a.data=lastRowData.concat(a.data),$("."+a.rowClassName+":last",$this).detach())}!a.responsive&&!a.append&&$this.width($this.width());if(a.data instanceof Array){"number"!=typeof a.padding&&(a.padding=parseInt(a.padding));"function"!=typeof a.itemWidth&&(a.itemWidth=function(b){return b[a.widthAttr]});"function"!=typeof a.itemHeight&&(a.itemHeight=
function(b){return b[a.heightAttr]});a.responsive&&!d.get($this).__responsive&&(window.addEventListener("resize",function(){initialWidth=d.get($this).width;newWidth=$this.offsetWidth;if(initialWidth!=newWidth){var a=d.get($this).task_id;a&&(a=clearTimeout(a),a=null);a=setTimeout(function(){if(d.get($this).width!=$this.offsetWidth){$this.innerHTML="";var a=d.get($this).lastSettings||{};a.data=d.get($this).data||{};a.maxWidth=$this.offsetWidth-1;flowr($this,a)}},80);d.set($this,{task_id:a})}}),d.set($this,
{__responsive:!0}));var l=a.data.slice(0),b=null,m=0,q=0,e=[];for(i=0;i<l.length;i++)e.push(l[i]);for(d.set($this,{data:e});null!=(b=u(l,a))&&0<b.data.length&&!(0<a.rows&&m>=a.rows);){l.splice(0,b.data.length);e=document.createElement("DIV");e.classList?e.classList.add(a.rowClassName):e.className+=" "+a.rowClassName;var r=$this.clientWidth-b.width-2*a.padding;for(i=0;i<b.data.length;i++){var n=b.data[i],g=a.render.call($this,n);extraw=Math.floor(r/b.data.length);0==i&&(extraw+=r%b.data.length);g.style.width=
n.width+extraw;g.style.height=n.height;g.style.marginBottom=a.padding+"px";g.style.marginLeft=0==i?"0":a.padding+"px";e.append(g);q++}$this.append(e);m++;d.set($this,{lastRow:b})}d.set($this,{lastSettings:a});"function"==typeof a.complete&&a.complete.call($this,{renderedRows:m,renderedItems:q})}}})();
